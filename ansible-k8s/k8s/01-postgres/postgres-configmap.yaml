apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: distributed-app
data:
  init.sql: |
    CREATE TABLE IF NOT EXISTS produits (
        id SERIAL PRIMARY KEY,
        name VARCHAR(100) NOT NULL,
        description TEXT,
        price DECIMAL(10,2) NOT NULL,
        date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );
    
    CREATE TABLE IF NOT EXISTS utilisateurs (
        id SERIAL PRIMARY KEY,
        nom VARCHAR(100) NOT NULL,
        email VARCHAR(100) UNIQUE NOT NULL,
        date_inscription TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );
    
    INSERT INTO produits (name, description, price) VALUES
        ('Ordinateur Portable', 'PC portable haute performance', 450000),
        ('Souris sans fil', 'Souris ergonomique', 12500),
        ('Clavier m√©canique', 'Clavier RGB', 25500);
    
    INSERT INTO utilisateurs (nom, email) VALUES
        ('s4liou', 'gayesaliou58@gmail.com'),
        ('Test User', 'test@example.com');